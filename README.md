# Node-Server 使用方法

---

## 项目介绍
### 主介绍  
更新于基础想法都成功实现的2023.03.16  
这是一个轻便的适用于刚入门的NodeJs开发人员使用或是学习的热更新服务端，我通过将配置界面整合进服务端，让开发人员可以快速的精确的对sql进行编写设置返回的API接口，并同时即可获取，让简单sql的执行和数据获取变得简单而且轻松。因为是热更新，因此加入的任何参数基本上都能立刻进行请求获取而不需要重启服务端。  
同时这个轻便服务端本质上是啥都没有实现但是又啥都实现了。我的目的就是为了让开发人员快速连接到mysql数据库和前端，特地写的中间服务端，可以直接在服务开启的源界面，进行配置sql语句和接口。  
不仅如此，也通过可以热更新的服务端进行部署，让后端sql配置不需要对服务端进行重写，可以更方便的对sql语句进行修改并直接取得返回成果，同时也可以直接在界面中看到返回结果（还在写）。  
当然在目前的基础上，你也可以进行包装和将项目加入你的项目，我的代码逻辑性还算能看得懂，对很多功能也都进行了剥离，同时如果你觉得NodeJs无从下手，也可以尝试着先使用我的服务端，之后自行尝试重写，任何遇到的难题也都欢迎找我讨论，在编写这个轻型服务端的过程中，我也遇到了很多困难，常常推倒重来，希望你能保持对代码的热情。
### 最初
通过使用nodejs进行轻量化的后端程序编写，剥离了依赖java实现的javaweb厚重且效率低的状况，适用于多数轻量化网站，实现了直接设置config即可增添api接口以及复杂接口可以单独开辟js程序进行执行的方式。
### 不足
数据表大，数据分表，存储过程都还不是支持的很好，主要原因就是因为自己偷懒将sql执行写到了一个地方去，未来可能会进行更改，但是也说不准。
## 项目结构
>node_modules---   项目依赖包   
>function    ---   存放主体函数功能   
>>api        ---   复杂api存放路径   
>>config.json---   项目配置文件   
>  
>src         ---   显示的界面   
>app.js      ---   入口文件   
>package.json ---  包管理文件！！（勿动，也别乱npm i）   

## 安装方法
拿到项目后，执行`npm install`进行恢复依赖
初次安装按照提示进行数据库的账户密码和调用库的安装配置，按着提示来就行了，如果不行就自己进config进行修改   
初次设置完之后，请手动关闭一次服务端再开启
提示：项目运行时，会自动先向数据库进行连接，如果自动退出就去检查数据库状况

### config.json介绍
例子：  
```
{
    "dataBase": {
        "user": "root",
        "password": "Mysqlroot",
        "database": "myGrade",
        "Eligibility": true
    },
    "port":8081,
    "apis":[
        {
            "id":1,
            "port":"/getClass",
            "sql":"select * from classes",
            "keyValue":"",
            "limit_flag":false
        },
        {
            "id":2,
            "port":"/getStudent",
            "sql":"select * from students",
            "keyValue":"studentid",
            "limit_flag":true
        }
    ]
}
```
### dataBase
存放数据库连接数据，只会在第一次运行时配置，剩下情况请手动修改
### port
后端服务器运行端口，默认8081
### apis
这里存放着简易api设置端口，id和请求端口请勿重复，有重复性检查，如果开不起服务器也请检查是否重复。   
sql则是存放运行的sql代码   
keyValue存放的是，可以通过地址栏传参的键，`/getStudent?studentid=xxx`这类用法中，传入的值必须标记，否则无效    
limit_flag标记是否可以分页的方式，可以多传入offset和limit两个参数，分别代表位移量和数据长度。   

## 你可能会遇到的问题
1. 始终连接不上数据库
    首先检查本地mysql服务器是不是已经到了8.0及以上版本，这些版本的用户验证和nodejs使用的mysql库有着版本差异，因此需要你在数据库自行执行这几条语句，如果还不能成功，请再发issues。
    ```
    use mysql;
    alter user 'root@localhost' identified with mysql_native_password by '你的密码';
    flush privileges;
    ```
2.  端口冲突
    我并没有设置对端口冲突的检测，而nodejs自带的检测并不是特别好？所以请自行确认你使用的端口没有被其他进程所占有
3.  跨域
    首先我已经使用了cros中间件，同时在请求返回时加入了允许跨域，如果仍然不行，请发issues我来研究。